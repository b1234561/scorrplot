<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>s-CorrPlot by mckennapsean</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>s-CorrPlot</h1>
        <p>interactive scatterplot for visually exploring pairwise correlation</p>

        <p class="view"><a href="https://github.com/mckennapsean/scorrplot">View the Project on GitHub <small>mckennapsean/scorrplot</small></a></p>


        <ul>
          <li><a href="https://github.com/mckennapsean/scorrplot/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/mckennapsean/scorrplot/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/mckennapsean/scorrplot">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
  
  <h1 id='scorr'>Documentation for <em>scorr</em></h1>

<p>An implementation of the <strong>s-CorrPlot</strong> in R using C++ and OpenGL.</p>

<h2 id='description'>About <em>scorr</em></h2>

<p>The <strong>s-CorrPlot</strong> is an interactive scatterplot for visually exploring pairwise correlation coefficients between variables in large datasets. Variables are projected as points on a scatterplot with respect to some user-selected variables of interest, driven by a geometric interpretation of correlation. The correlation of all other variables to the selected one is indicated by vertical gridlines in the plot. By selecting new variables of interest, a user can create simple tours of the correlation space through animations between different projections of the data.</p>

<p>For further details about the s-CorrPlot, please refer to <a href="http://mckennapsean.com/projects/s-corrplot/">our companion paper</a>.</p>

<h2 id='tool_overview'>Tool Overview</h2>

<p>The call <em>scorr(data)</em> will initialize the s-CorrPlot tool with your input dataset. In this view, the default projection is based off of the first two principal component vectors of the dataset, but you can select any other variables in the plot to animate to a new projection of the data. These principal components are illustrated as interactive bar-charts on the left of the screen. A dataset must provide factor labels for the entire dataset, and each unique label is given its own color as shown in the boxes along the bottom. Lastly, on the right is both a parallel coordinate plot showing a profile of the observations for each variable as well as a text display for all variables near the cursor in the display.</p>

<h2 id="data_format">Data Format</h2>

<p>The s-CorrPlot expects a data frame where each row is your variable and its columns correspond to different observations, where <em>rownames</em> and <em>colnames</em> correspond to these respectively. Additionally, a final column of nominal labels is expected (the factor data type), so that each variable gets an associated color in the plot. Each row variable will become a point in the final s-CorrPlot display, and the observations will be displayed for these points using the parallel coordinates view. For further details, please see the package's provided data <em>data(NAME)</em> as well as the data frame constructed in the example.</p>

<h2 id='mouse_interactions'>Mouse Interactions</h2>

<p>Hovering the mouse over the data points will update the parallel coordinate plot and text display views by the variables near the cursor. Additionally, you can left-click variables or the bar-charts to select them as the new primary variable of interest, thus animating the plot accordingly and this point moves to the right-most part of the circular plot. All correlation coefficients to this primary variable can be read directly by vertical gridlines, where anti-correlated variables are furthest away and zero correlation is near the middle.</p>

<p>Additionally, you can right-click the bars or points in order to select them as the new secondary variable of interest, and then the s-CorrPlot will animate the projection by moving all variables vertically to their new locations. It is also possible to shift-click on variables in order to affix them in the parallel coordinates plot for quick comparison against other variables.</p>

<h2 id='keyboard_interactions'>Keyboard Interactions</h2>

<p>To analyze correlation with Spearman&#8217;s rank correlation, press &#8217;s&#8217;. You can return to the default of Pearson&#8217;s correlation by pressing &#8217;p&#8217;.</p>

<p>To remove all highlighting and selected variables in the display, press &#8217;c&#8217;.</p>

<p>To adjust transparency of data points, press the left and right arrow keys.</p>

<p>To adjust the size of data points, press the up and down arrow keys.</p>

<p>To adjust the kernel bandwidth for density estimation, press &#8217;<&#8217; or &#8217;>&#8217;.</p>

<p>To change the background color of the plot, press &#8217;b&#8217;.</p>

<h2 id="queries">Queries through R Console</h2>

<p>Once you have initialized the s-CorrPlot tool, there are several commands to interact with the display from the R console.</p>

<p>The primary or secondary projection can be set directly by passing in a vector with the observations stored in the columns (or length equal to the number of observations in the input data). These can be input using <em>scorr.set.primary()</em> and <em>scorr.set.secondary()</em>. Additionally, these same vectors can be output to R using the associated get functions.</p>

<p>The values used for density estimation in the current view of the tool can be output back into R using the call <em>scorr.get.density()</em>.</p>

<p>To retrieve the currently n top correlation or anti-correlated points (i.e. left-most and right-most points, respectively), call <em>scorr.get.cor(n)</em> or <em>scorr.get.acor(n)</em>, which returns a data frame with n rows with columns corresponding to each variable's index in the input data, its correlation to the primary variable, and its rowname. Similarly, you can call either <em>scorr.get.corr(r)</em> or <em>scorr.get.acorr(r)</em> in order to output all variables with above or below the given correlation coefficient, respectively.</p>

<p>To highlight a set of variables, pass a list of indices to highlight into the command <em>scorr.highlight.index()</em> or a list of names to <em>scorr.highlight.name()</em>.</p>

<p>The call <em>scorr.close()</em> will close the interactive tool safely.</p>

<p>The function <em>scorr.plot()</em> takes data and two variables as input in order to produce a static version of the s-CorrPlot, in case the interactive tool is unable to build or run on a machine. This is useful for Windows computers, since they are unable to compile the tool.</p>

<h2 id="commands"><em>scorr</em> Commands</h2>

<ul>
  <li><p>scorr(data, useDensity = T, showProfile = T, showPatch = F, threshold = 0, coloring = 1 : nrows(data), perms = 0)</p>
    <ul>
      <li><p>data: A data frame with d columns and n rows. Each row is a variable and the first 1:(d-1) columns are observations and the nth column is a label assignment in the form of a factor. Names for the variables should be supplied in <em>rownames(data)</em>, and names for each column can be supplied in <em>colnames(data)</em></p></li>
      <li><p>useDensity: Set transparancey of the plotted variables based on a density estimate of the distribution along the correlation sphere.</p></li>
      <li><p>showProfile: Show the parallel coordinates plot.</p></li>
      <li><p>showPatch: Show each variable as a greysacle patch image.</p></li>
      <li><p>threshold: Variables with variance below the threshold are excluded.</p></li>
      <li><p>coloring: Alternate continuous values for each variable for coloring the data instead of using labels (switch by pressing c).</p></li>
      <li><p>perms: Number of permutations for permutation test of projection. The permutation test computes the probability that there is a projection with more points with correlation r &gt;a for a &gt;=0 and r &lt;a for a &gt;=0 than the current shown projection.</p></li>
    </ul>
  </li>
  <li><p>scorr.set.primary(v)</p>
    <ul>
      <li><p>v: Vector with d-1 columns in order to set a new projection.</p></li>
    </ul>
  </li>
  <li><p>scorr.set.secondary(v)</p>
    <ul>
      <li><p>v: Vector with d-1 columns in order to set a new projection.</p></li>
    </ul>
  </li>
  <li><p>scorr.get.primary()</p>
    <ul>
      <li><p>output the primary variable vector of interest for the current projection</p></li>
    </ul>
  </li>
  <li><p>scorr.get.secondary()</p>
    <ul>
      <li><p>output the secondary variable vector of interest for the current projection</p></li>
    </ul>
  </li>
  <li><p>scorr.get.size()</p>
    <ul>
      <li><p>get the number of points in the plot</p></li>
    </ul>
  </li>
  <li><p>scorr.get.selected()</p>
    <ul>
      <li><p>output the list of selected points</p></li>
    </ul>
  </li>
  <li><p>scorr.get.density()</p>
    <ul>
      <li><p>get current density values of all points in the scatterplot</p></li>
    </ul>
  </li>
  <li><p>scorr.get.corr(r)</p>
    <ul>
      <li><p>r: Correlation coefficient to threshold which variables to output.</p></li>
    </ul>
  </li>
  <li><p>scorr.get.acorr(r)</p>
    <ul>
      <li><p>r: Correlation coefficient to threshold which variables to output.</p></li>
    </ul>
  </li>
  <li><p>scorr.get.cor(n)</p>
    <ul>
      <li><p>n: Number of top anti-/correlations to retrieve.</p></li>
    </ul>
  </li>
  <li><p>scorr.get.acor(n)</p>
    <ul>
      <li><p>n: Number of top anti-/correlations to retrieve.</p></li>
    </ul>
  </li>
  <li><p>scorr.get.name(indices)</p>
    <ul>
      <li><p>indices: Variable indices to retrieve the names of, likely in order to highlight them in the s-CorrPlot display.</p></li>
    </ul>
  </li>
  <li><p>scorr.highlight.index(indices)</p>
    <ul>
      <li><p>indices: Variable indices to retrieve the names of, likely in order to highlight them in the s-CorrPlot display.</p></li>
    </ul>
  </li>
  <li><p>scorr.highlight.name(names)</p>
    <ul>
      <li><p>names: Data point names to highlight in the s-CorrPlot display</p></li>
    </ul>
  </li>
  <li><p>scorr.close()</p>
    <ul>
      <li><p>close <em>scorr</em></p></li>
    </ul>
  </li>
  <li><p>scorr.plot(data2, v2, v2)</p>
    <ul>
      <li><p>data2: A data frame where rows correspond to variables. May include the final column as factor labels for automatic coloring but not required.</p></li>
      <li><p>v2: Both a primary and secondary vector for defining a static s-CorrPlot view. Can include labels from the rows or pipe in from the interactive display.</p></li>
    </ul>
  </li>
</ul>

<h2 id="code_example">Example Code</h2>

<p>This is a code example to create a random dataset and view it in <em>scorr</em>.</p>

<pre><code># load library
library(scorr)

# create a uniform random dataset
# 10,000 variables with 10 observations each
m = matrix(runif(10 * 10000), ncol = 10, nrow = 10000);
data = data.frame(m)

# add random labels (as factors!)
data$labels = as.factor(ceiling((0.1 + runif(10000)) * 4))
levels(data$labels) = c(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;)
names = c();
for(i in 1 : 10000)
  names[i] = paste(&quot;name&quot;, i, sep = &quot;-&quot;)

rownames(data) = names

# start up the s-CorrPlot interactive display
# disable density estimation since random data is spread out
scorr(data)

# get the number of variables or points on the screen
scorr.get.size()

# select a new variable of interest
scorr.set.primary(data[3, 1 : ncol(data) - 1])

# query the currently selected primary variable of interest (as index)
scorr.get.selected()

# query all points for their density estimation values
# MUST have enabled density estimation earlier to do so!
density = scorr.get.density()

# query the positive correlations between 0.95 and 1 in our current projection
corr = scorr.get.corr(0.95)

# query the negative correlations between -0.95 and -1 in our current projection
acorr = scorr.get.acorr(0.95)

# query the top 100 correlations in our current projection
cor = scorr.get.cor(100)

# query the top 100 anti-correlations in our current projection
acor = scorr.get.acor(100)

# highlight our first ten variables in the plot
scorr.highlight.index(1 : 10);

# highlight some other variables by their names
scorr.highlight.name(c(&quot;name-45&quot;, &quot;name-101&quot;))

# create a static plot of our current view
# must have called scorr() first in order to use the get functions!
scorr.plot(data, scorr.get.primary(), scorr.get.secondary())

# before closing R, be sure to close the s-CorrPlot!
# you can call the function below or just press &#39;q&#39; in the tool
scorr.close()
</code></pre>

<h2>
<a name="contact" class="anchor" href="#contact"><span class="octicon octicon-link"></span></a>Contact</h2>

<p>If you have any difficulties or questions, please contact <a href="mailto:sean@cs.utah.edu">sean@cs.utah.edu</a>.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/mckennapsean">mckennapsean</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
